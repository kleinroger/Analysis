{% extends 'base.html' %}

{% block content %}
<style>
    /* 自定义动画效果 */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translate3d(0, 20px, 0); }
        to { opacity: 1; transform: translate3d(0, 0, 0); }
    }
    .layui-card {
        animation: fadeInUp 0.5s ease-out both;
        transition: box-shadow 0.3s;
    }
    .layui-card:hover {
        box-shadow: 0 8px 16px rgba(0,0,0,0.1) !important;
    }
    .stat-number {
        font-size: 36px;
        font-weight: 600;
        line-height: 1.2;
        margin-bottom: 5px;
        background: linear-gradient(to right, #1e9fff, #009688);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .stat-desc {
        color: #888;
        font-size: 13px;
    }
    /* 不同的动画延迟 */
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    .delay-4 { animation-delay: 0.4s; }
</style>

<div class="layui-row layui-col-space15">
    <!-- 顶部统计卡片 -->
    <div class="layui-col-md3 delay-1">
        <div class="layui-card">
            <div class="layui-card-header">今日采集数据</div>
            <div class="layui-card-body">
                <div class="stat-number">2,845</div>
                <div class="stat-desc">
                    较昨日 <span class="layui-text-red">↑ 12%</span>
                    <span class="layui-badge-dot layui-bg-orange" style="float: right; margin-top: 6px;"></span>
                </div>
                <div class="layui-progress layui-progress-big" style="margin-top: 15px;">
                  <div class="layui-progress-bar layui-bg-blue" lay-percent="85%"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="layui-col-md3 delay-2">
        <div class="layui-card">
            <div class="layui-card-header">高危预警信息</div>
            <div class="layui-card-body">
                <div class="stat-number" style="background: linear-gradient(to right, #ff5722, #ffb800); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">15</div>
                <div class="stat-desc">
                    待处理 <span class="layui-text-red">4</span> 条
                    <span class="layui-badge layui-bg-red" style="float: right;">急</span>
                </div>
                <div class="layui-progress layui-progress-big" style="margin-top: 15px;">
                  <div class="layui-progress-bar layui-bg-red" lay-percent="30%"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="layui-col-md3 delay-3">
        <div class="layui-card">
            <div class="layui-card-header">系统运行任务</div>
            <div class="layui-card-body">
                <div class="stat-number" style="background: linear-gradient(to right, #009688, #5fb878); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">8</div>
                <div class="stat-desc">
                    正常运行中
                    <i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop" style="float: right; color: #009688;"></i>
                </div>
                <div class="layui-progress layui-progress-big" style="margin-top: 15px;">
                  <div class="layui-progress-bar layui-bg-green" lay-percent="100%"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="layui-col-md3 delay-4">
        <div class="layui-card">
            <div class="layui-card-header">知识库词条</div>
            <div class="layui-card-body">
                <div class="stat-number" style="background: linear-gradient(to right, #393d49, #666); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">12,903</div>
                <div class="stat-desc">
                    本周新增 <span class="layui-text-blue">328</span>
                    <span class="layui-badge-rim" style="float: right;">Stable</span>
                </div>
                <div class="layui-progress layui-progress-big" style="margin-top: 15px;">
                  <div class="layui-progress-bar layui-bg-cyan" lay-percent="60%"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 中间主要区域 -->
    <div class="layui-col-md8 delay-3">
        <div class="layui-card" style="height: 400px;">
            <div class="layui-card-header">
                数据来源分布趋势
                <div class="layui-btn-group layui-layout-right" style="padding: 5px 15px;">
                    <button class="layui-btn layui-btn-xs layui-btn-primary">近7天</button>
                    <button class="layui-btn layui-btn-xs layui-btn-primary">近30天</button>
                </div>
            </div>
            <div class="layui-card-body" style="padding: 0;">
                 <div class="layui-carousel" id="data-chart-carousel" style="width: 100%; height: 350px !important;">
                    <div carousel-item>
                        <div style="background-color: #f8f9fa; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            <i class="layui-icon layui-icon-chart-screen" style="font-size: 64px; color: #1e9fff;"></i>
                            <p style="margin-top: 10px; color: #666;">此处展示全网舆情走势折线图</p>
                            <p style="font-size: 12px; color: #999;">(ECharts 渲染区域)</p>
                        </div>
                        <div style="background-color: #f8f9fa; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                             <i class="layui-icon layui-icon-chart" style="font-size: 64px; color: #ffb800;"></i>
                             <p style="margin-top: 10px; color: #666;">此处展示关键词热度饼图</p>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <!-- 右侧动态栏 -->
    <div class="layui-col-md4 delay-4">
        <div class="layui-card" style="height: 400px; overflow-y: auto;">
            <div class="layui-card-header">
                实时预警动态
                <span class="layui-badge layui-bg-red layui-layout-right" style="margin-top: 10px;">Live</span>
            </div>
            <div class="layui-card-body">
                <ul class="layui-timeline">
                  <li class="layui-timeline-item">
                    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                    <div class="layui-timeline-content layui-text">
                      <h3 class="layui-timeline-title">刚刚</h3>
                      <p>检测到敏感词 <span style="color: #ff5722;">"突发事故"</span></p>
                      <p>来源：某社交平台 <span class="layui-badge-rim">高危</span></p>
                    </div>
                  </li>
                  <li class="layui-timeline-item">
                    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                    <div class="layui-timeline-content layui-text">
                      <h3 class="layui-timeline-title">10分钟前</h3>
                      <p>系统自动完成了 <span style="color: #009688;">数据清洗任务 #1024</span></p>
                      <ul>
                        <li>清理无效数据 120 条</li>
                        <li>归档历史记录</li>
                      </ul>
                    </div>
                  </li>
                  <li class="layui-timeline-item">
                    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                    <div class="layui-timeline-content layui-text">
                      <h3 class="layui-timeline-title">1小时前</h3>
                      <p>采集节点 [Node-03] 恢复连接</p>
                    </div>
                  </li>
                  <li class="layui-timeline-item">
                    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                    <div class="layui-timeline-content layui-text">
                      <div class="layui-timeline-title">过去均无异常</div>
                    </div>
                  </li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
layui.use(['carousel', 'element', 'layer'], function(){
  var carousel = layui.carousel
  ,element = layui.element
  ,layer = layui.layer;
  
  // 轮播图配置
  carousel.render({
    elem: '#data-chart-carousel'
    ,width: '100%' //设置容器宽度
    ,height: '350px'
    ,arrow: 'hover' //始终显示箭头
    ,anim: 'fade' //切换动画方式
  });
  
  // 模拟动态加载效果
  layer.msg('仪表盘数据已同步', {icon: 1, time: 1000});
});
</script>
{% endblock %}
